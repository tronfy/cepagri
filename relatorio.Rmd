---
title: "Relatório de análise dos dados do Cepagri"
output:
  html_notebook: default
  md_document:
    variant: markdown_github
  pdf_document: default
---

```{r load-packages, include=FALSE}
library(ggplot2)
library(dplyr)
library(lubridate)
library(tidyverse)
```

## Integrantes

* **19164** - Bruno Arnone Franchi
* **19191** - Nícolas Denadai Schmidt


## Introdução

Este relatório descreve as análises feitas por nosso grupo sobre os dados meteorológicos do Cepagri/Unicamp, no período correspondido de 01/01/2015 a 31/12/2020. Os dados foram lidos de um arquivo CSV, disponível [aqui](https://ic.unicamp.br/~zanoni/cepagri/cepagri.csv).

```{r}
# fazer download do arquivo, se necessário
if (!file.exists("cepagri.csv")) {
  download.file("http://ic.unicamp.br/~zanoni/cepagri/cepagri.csv", "cepagri.csv")
}

# ler dataset .csv
names <- c("horario", "temp", "vento", "umid", "sensa")
cepagri <- read.csv("cepagri.csv", header = FALSE, sep = ";", col.names = names)
```


### Tratamento de dados

Fizemos um tratamento inicial aos tipos de dados, para que a coluna de `horario` fosse lida como Data; e a coluna `temp` fosse, assim como as outras, lida como Número. Além disso, removemos as entradas com erros de leitura.

```{r}
# criar dataframe, tratar tipos de coluna e erros
df <- data.frame(cepagri)
# ignorar warning de leituras N/A, vamos corrigir isso na próxima linha
suppressWarnings({
  df <- df %>%
    mutate(horario = as_datetime(df$horario, format = "%d/%m/%Y-%H:%M")) %>%
    mutate(temp = as.numeric(df$temp))
})
df <- na.omit(df)
```

Depois, extraímos o período de tempo que vamos estudar: do primeiro dia de 2015 ao último dia de 2020.

```{r}
# extrair dados entre 2015-01-01 e 2020-12-31
df <- df[
  df$horario >= "2015-01-01" &
    df$horario <= "2020-12-31",
]
```


## Estações do ano

Nessa análise, esperamos encontrar relações entre a estação do ano e as leituras de temperatura, umidade, e vento.

### Temperatura

![](./plot/diario_temp.png)

Ao analisar as médias de temperatura, podemos claramente relacioná-las às estações do ano, visto que o verão se destaca com médias mais altas; e o inverno com médias mais baixas.
Enquanto isso, primavera e verão aparecem como épocas de "transição" entre os dois extremos, com as temperaturas caindo ao longo do outono, e se elevando ao longo da primavera.

### Umidade

![](./plot/diario_umid.png)

Assim como na análise de temperatura, é facil perceber diferenças entre as estações: em geral, o verão apresenta umidade maior e o inverno umidade menor, com as estações restantes apresentando dados similares, entre as duas estações limiares.

### Vento

![](./plot/diario_vent.png)

Ao analisar o gráfico de vento médio visualmente, não se percebe diferenças significativas entre cada estação mas, em alguns casos, parece que há mais vento no inverno.
Para testar essa hipótese, vamos analisar a correlação entre temperatura e vento.
